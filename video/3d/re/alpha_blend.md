# ポリゴンとフレームバッファのアルファブレンド

半透明ポリゴンのピクセルは、フレームバッファのピクセルと次のようにアルファブレンドされます。

```c
  FrameBuf[R] = ((Poly[R]*(Poly[A]+1)) + (FrameBuf[R] * (31- Poly[A]))) / 32;
  FrameBuf[G] = ((Poly[G]*(Poly[A]+1)) + (FrameBuf[G] * (31- Poly[A]))) / 32;
  FrameBuf[B] = ((Poly[B]*(Poly[A]+1)) + (FrameBuf[B] * (31- Poly[A]))) / 32;
  FrameBuf[A] = max(Poly[A],FrameBuf[A]);
```

次の3つの条件のいずれかが満たされる場合、アルファブレンドは発生せず、フレームバッファにはポリゴンの色がそのままコピーされます。

1. `DISP3DCNT.3` で アルファブレンドが無効化されている場合
2. `Poly[A]` が 31 の場合
3. フレームバッファが完全に透明な場合

3つ目の条件は、リアプレーンがアルファ値0で初期化されている場合に発生します。(3Dレイヤと2Dレイヤを組み合わせて描画する場合によく使われます)

また、ポリゴンのアルファ値が0の場合、ポリゴンは描画されません。(フレームバッファも更新されません)
