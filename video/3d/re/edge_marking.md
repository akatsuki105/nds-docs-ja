# エッジ強調(Edge Marking)

エッジ強調は、Attributeバッファ内で異なるポリゴンIDを持つ(ワイヤーフレームを含む)不透明ポリゴンの輪郭(エッジ)を強調する機能です。この機能は、`DISP3DCNT.5`をセット・クリアすることで（フレーム単位で）有効・無効の切り替えが可能です。

<details>
  <summary>使用例</summary>

左: エッジ強調OFF, 右: エッジ強調ON

階段あたりがわかりやすいです。

![noedgemarking](../../../images/g3/edge_marking_disable.png)&nbsp;&nbsp;![edgemarking](../../../images/g3/edge_marking_enable.png)

</details>

## 4000330h..33Fh - EDGE_COLOR - エッジカラー 0..7 (W)

エッジ強調に使用される色は、ポリゴンIDの上位3bitをインデックスとして選択される8色です。

この16バイト領域には8つのエッジカラー（RGB555）が格納されます。

## 注意

NDSのレンダリングエンジンは (後述の)条件を満たしたポリゴンの 下端/右端 をレンダリングしません。(レンダリング負荷軽減のための機能と思われる)

エッジが除外される小さなポリゴンは以下の通りです:

```
  - エッジ強調とAA が無効になっている際の（ワイヤーフレームを除く）不透明ポリゴン
  - 垂直な右端を持つ（線分を除く）全てのポリゴン。
  - DISP3DCNT.3 で アルファブレンド機能が無効になっている際の 半透明ポリゴン
```

その他の全てのポリゴンは、全てのエッジを含めて完全なサイズで描画されます。

注：このエッジ除外を無効化するには、エッジ強調を有効化してください。（ポリゴンが同一IDを持ちエッジが描画されない場合でも、エッジ除外は無効化されます）

