# ARM9以降に追加された命令

ARM9以降なのでGBAではサポートされていません。

CLZ, QADD, QSUBが該当します。

## Count Leading Zeros (CLZ)

CLZは、先頭ビットから連続し先行する0の個数をカウントする命令です。先頭ビットが1なら0となります。

```
CLZ{cond} Rd,Rm  ; Rd = Rmの先頭0ビットの数
```

 ビット | 内容
---- | ---- 
31-28 | 条件
27-16 | 必ず 0b0001_0110_1111
15-12 | Rd - 演算結果を格納するレジスタ番号 (R0..R14)
11-4 | 必ず 0b1111_0001
3-0 | Rm - オペランドとなるレジスタ

実行時間: 1S

フラグ: 不変

## QADD, QSUB

 bit  |  内容
---- | ----
31-28 | 条件
27-24 | 必ず 0b0001
23-20 | オペコード（後述）
19-16 | Rn (R0..R14)
15-12 | Rd (R0..R14)
11-4 | 必ず 0b0000_0101
3-0 | Rm (R0..R14)

### オペコード(23-20bit)

 値  |  フォーマット | 処理内容 | 備考
---- | ---- | ---- | ----
0b0000 | QADD{cond}  Rd,Rm,Rn | Rd=Rm+Rn | -- 
0b0010 | QSUB{cond}  Rd,Rm,Rn | Rd=Rm-Rn | -- 
0b1000 | QDADD{cond}  Rd,Rm,Rn | Rd=Rm+Rn*2 | D = doubled 
0b1000 | QDSUB{cond}  Rd,Rm,Rn | Rd=Rm-Rn*2 | D = doubled 

実行時間: 1S+Interlock

結果は，オーバーフローした場合，符号付き32ビットの範囲に切り詰められ，Qフラグが設定されます。（そうでない場合はQフラグは変更されません）

NZCV は不変です。

注意：`Rn*2`は内部で最初に処理されるため、最終的な結果が範囲内に収まる場合でも、切り捨てられる可能性があります。
